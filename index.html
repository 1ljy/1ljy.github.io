<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>致我最爱的你 | 三周年快乐</title>

    <!-- 预加载关键资源 -->
    <link rel="preload" href="style.css" as="style">
    <link rel="preload" href="script.js" as="script">
    <link rel="preload" href="./fonts/DancingScript-Bold.ttf" as="font" type="font/ttf" crossorigin>

    <link rel="stylesheet" href="style.css">
    <!-- 加载本地字体 -->
    <style>
        @font-face {
            font-family: 'Dancing Script';
            font-style: normal;
            font-weight: 700;
            src: local('Dancing Script Bold'), local('DancingScript-Bold'), url('./fonts/DancingScript-Bold.ttf') format('truetype');
            font-display: swap;
        }
    </style>
</head>
<body>

    <!-- 【新增】全屏加载遮罩 -->
    <div id="loading-mask">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p id="loading-text">正在准备浪漫...</p>
            <button id="manual-play-btn" style="display: none;">点击播放音乐</button>
        </div>
    </div>

    <!-- 1. 动态星空背景 -->
    <div id="particles-js"></div>

    <!-- 2. 鼠标跟随光晕 (仅在桌面端显示) -->
    <div class="cursor-glow"></div>

    <!-- 3. 爱心雨容器 -->
    <div id="hearts-rain"></div>

    <!-- 4. 背景音乐 (关键修改：移除 autoplay 和 muted，由JS控制) -->
    <audio id="bgMusic" loop>
        <source src="music/xiaoxingyun.mp3" type="audio/mpeg">
    </audio>

    <!-- 5. 导航栏 -->
    <header>
        <nav>
            <a href="#" class="nav-link active" data-target="timeline-view">我们的故事</a>
            <a href="#" class="nav-link" data-target="letter-view">一封情书</a>
            <a href="#" class="nav-link" data-target="future-view">未来约定</a>
            <a href="#" class="nav-link" data-target="game-view">默契大考验</a>
            <a href="#" class="nav-link" data-target="constellation-view">星空下的誓言</a>
        </nav>
    </header>

    <main>
        <!-- 视图1: 时间轴 -->
        <section id="timeline-view" class="view active">
            <div class="hero-text">
                <h1 id="typewriter"></h1>
                <p>From 2022.03.27 to Forever</p>
            </div>
            <div class="timeline-container">
                <div class="timeline-line"></div>
                
                <!-- 记忆点 1 (单张照片示例) -->
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <h3>初识 · 一切开始的地方</h3>
                        <p class="date">2021年8月8日</p>
                        <div class="photo-wrapper">
                            <img src="images/photo1.jpg" alt="第一次见面" loading="lazy" onclick="openPhotoViewer('images/photo1.jpg')">
                        </div>
                        <p>世界很大，幸好遇见。那天，夏风漫过窗棂时，隔着距离，听见你的声音。没有画面，却记了很久。</p>
                    </div>
                </div>

                <!-- 记忆点 2 (多张照片示例 - 2张) -->
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <h3>心动 · 第一次约会</h3>
                        <p class="date">2022年7月7日</p>
                        <div class="photo-wrapper">
                            <img src="images/photo2.jpg" alt="第一次约会 - 1" loading="lazy" onclick="openPhotoViewer('images/photo2.jpg')">
                            <img src="images/photo2-2.jpg" alt="第一次约会 - 2" loading="lazy" onclick="openPhotoViewer('images/photo2-2.jpg')">
                        </div>
                        <p>笨拙的对话，藏不住的心跳。原来电影里的情节，真的会发生在自己身上。</p>
                    </div>
                </div>

                <!-- 记忆点 3 (多张照片示例 - 3张) -->
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <h3>同行 · 第一次旅行</h3>
                        <p class="date">2023年1月17日</p>
                        <div class="photo-wrapper">
                            <img src="images/photo3.jpg" alt="第一次旅行 - 1" loading="lazy" onclick="openPhotoViewer('images/photo3.jpg')">
                            <img src="images/photo3-2.jpg" alt="第一次旅行 - 2" loading="lazy" onclick="openPhotoViewer('images/photo3-2.jpg')">
                            <img src="images/photo3-3.jpg" alt="第一次旅行 - 3" loading="lazy" onclick="openPhotoViewer('images/photo3-3.jpg')">
                        </div>
                        <p>和你一起看的风景，才叫风景。山海辽阔，都不及你眼里的星河。</p>
                    </div>
                </div>

                <!-- 在这里可以继续添加更多的记忆点 -->
                <!-- 例如：
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <h3>新标题</h3>
                        <p class="date">日期</p>
                        <div class="photo-wrapper">
                            <img src="images/xxx.jpg" alt="描述" loading="lazy" onclick="openPhotoViewer('images/xxx.jpg')">
                            <img src="images/yyy.jpg" alt="描述" loading="lazy" onclick="openPhotoViewer('images/yyy.jpg')">
                        </div>
                        <p>描述文字...</p>
                    </div>
                </div>
                -->

            </div>
        </section>

        <!-- 视图2: 信件页 -->
        <section id="letter-view" class="view">
            <div class="content-card">
                <div id="unlockForm">
                    <h2>这封信，只属于你</h2>
                    <p>请输入你的生日，解锁我为你写的话</p>
                    <input type="date" id="birthdayInput">
                    <button onclick="checkBirthday()">解锁 ❤️</button>
                </div>
                <div id="letterContent" style="display: none;">
                    <h1>To My Dearest Love,</h1>
                    <p id="letter-text"></p>
                </div>
            </div>
        </section>

        <!-- 视图3: 未来约定页 -->
        <section id="future-view" class="view">
            <div class="content-card">
                <h1>Our Next Chapter</h1>
                <p>我们未完待续的故事...</p>
                <ul class="future-list">
                    <li>🏔️ 去冰岛看极光，在星空下许愿</li>
                    <li>🏠 一起装修我们的小家，每个角落都是爱</li>
                    <li>🐻 养一只肥猫，看它在我们脚边长大</li>
                    <li>💍 在一个只有我们知道的日子，给你一个家</li>
                    <li>👨‍👩‍👧‍👦 组建我们自己的小家庭，听孩子叫我们爸爸妈妈</li>
                    <li>👵🏻👴🏻 变成两个可爱的老头老太太，还手牵手去散步</li>
                </ul>
            </div>
        </section>

        <!-- 视图4: 默契大考验游戏页 -->
<section id="game-view" class="view">
    <div class="content-card">
        <h1>默契大考验 ❤️</h1>
        <p>看看我们有多了解彼此！</p>
        
        <!-- 游戏开始界面 -->
        <div id="game-start">
            <p>准备好了吗？</p>
            <button id="start-game-btn">开始游戏</button>
        </div>

        <!-- 游戏进行界面 -->
        <div id="game-play" style="display: none;">
            <div class="question-container">
                <h2 id="question-text">问题将在这里显示</h2>
            </div>
            <div class="options-container" id="options-container">
                <!-- 选项将由JS动态生成 -->
            </div>
            <div class="game-progress">
                <span id="progress-text">1 / 5</span>
            </div>
        </div>

        <!-- 游戏结果界面 -->
        <div id="game-result" style="display: none;">
            <h2>测试完成！</h2>
            <p>你们的默契值是：</p>
            <div class="score-display">
                <span id="score-value">0</span>%
            </div>
            <p id="result-message"></p>
            <button id="restart-game-btn">再玩一次</button>
        </div>
    </div>
</section>

<!-- 视图5: 星空下的誓言 -->
<section id="constellation-view" class="view">
    <div class="content-card">
        <h1>星空下的誓言 ✨</h1>
        <p>用星辰，画出我们共同的答案。</p>
        
        <!-- 游戏画布容器 -->
        <div id="game-canvas-container">
            <canvas id="star-canvas"></canvas>
            <!-- 提示信息 -->
            <div id="game-hint">
                <p id="hint-text">点击“开始”，点亮属于我们的第一颗星</p>
            </div>
        </div>

        <!-- 游戏控制按钮 -->
        <div id="game-controls">
            <button id="start-canvas-btn">开始绘制</button>
            <button id="check-answer-btn" style="display: none;">提交答案</button>
            <button id="next-level-btn" style="display: none;">下一题</button>
        </div>
    </div>
</section>


    </main>

    <!-- 全屏照片查看器 -->
    <div id="photo-viewer" class="photo-viewer">
        <span class="close-viewer">&times;</span>
        <img class="viewer-content" id="viewer-img">
    </div>

    <!-- 引入本地脚本 -->
    <script src="js/particles.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
