/* --- 全局与移动端基础 --- */
* { box-sizing: border-box; }
html, body { width: 100%; height: 100%; overflow-x: hidden; background: #121212; color: #fff; font-size: 16px; }

/* --- 主容器与视图 --- */
.main-container { display: none; }
.view { display: none; min-height: 100vh; padding: 70px 15px 20px; opacity: 0; transition: opacity 0.3s; }
.view.active { display: block; opacity: 1; }

/* --- 移动端导航 --- */
.mobile-header { position: fixed; top: 0; left: 0; right: 0; background: rgba(18, 18, 18, 0.95); z-index: 100; backdrop-filter: blur(10px); }
.mobile-nav { display: flex; overflow-x: auto; scroll-snap-type: x mandatory; -webkit-overflow-scrolling: touch; padding: 10px 0; scrollbar-width: none; }
.mobile-nav::-webkit-scrollbar { display: none; }
.nav-item { flex: 1 0 20%; text-align: center; padding: 10px; scroll-snap-align: center; white-space: nowrap; color: rgba(255,255,255,0.6); transition: all 0.3s; }
.nav-item.active { color: #e91e63; border-bottom: 2px solid #e91e63; }
.mobile-main { padding-top: 60px; }

/* --- 视图1: 时间轴 --- */
.hero-text { text-align: center; padding: 20px 0; }
.hero-text h1 { font-family: 'Dancing Script', cursive; font-size: 2.5em; margin-bottom: 10px; }
.hero-text p { color: #ccc; }
.timeline-scroll { max-height: calc(100vh - 180px); overflow-y: auto; -webkit-overflow-scrolling: touch; }
.timeline-item { background: rgba(255,255,255,0.05); border-radius: 15px; margin-bottom: 20px; padding: 15px; }
.timeline-date { color: #e91e63; font-weight: bold; margin-bottom: 10px; }
.timeline-content h3 { margin-bottom: 10px; }
.photo-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-bottom: 10px; }
.photo-grid img { width: 100%; border-radius: 8px; }

/* --- 视图2: 情书 --- */
.letter-container { background: rgba(255,255,255,0.05); border-radius: 15px; padding: 20px; }
#unlockForm { text-align: center; }
#unlockForm input { width: 80%; padding: 10px; margin: 10px 0; border-radius: 8px; border: 1px solid #555; background: rgba(255,255,255,0.1); color: #fff; }
#unlockBtn { padding: 10px 30px; border: none; border-radius: 20px; background: #e91e63; color: #fff; cursor: pointer; }
.letter-content { padding: 20px; white-space: pre-wrap; line-height: 1.8; }

/* --- 视图5: 星空下的誓言 (重点优化) --- */
.constellation-container { text-align: center; }
.constellation-container h1 { font-family: 'Dancing Script', cursive; font-size: 2em; margin-bottom: 20px; }
.star-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(3, 1fr);
    gap: 10px;
    width: 90%;
    height: 60vh;
    max-width: 500px;
    margin: 0 auto 20px;
    background: rgba(0,0,0,0.3);
    border-radius: 15px;
    padding: 10px;
    position: relative;
}
.grid-cell {
    background: rgba(255,255,255,0.05);
    border-radius: 10px;
    position: relative;
    cursor: pointer;
    overflow: hidden;
}
.grid-cell::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0) 70%);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
}
.grid-cell.active::before {
    width: 100px;
    height: 100px;
}
.grid-cell.active::after {
    content: '✨';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 1.5em;
}
.game-controls { margin: 20px 0; }
.game-controls button { padding: 12px 30px; border: none; border-radius: 25px; background: linear-gradient(45deg, #e91e63, #9c27b0); color: #fff; cursor: pointer; margin: 0 10px; }
#gameHint { color: rgba(255,255,255,0.8); margin-top: 10px; }

/* --- 动画与特效 --- */
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
/* ... 其他动画 ... */

/* --- 照片查看器 --- */
.photo-viewer { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 1000; }
.viewer-content { position: relative; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; }
.viewer-content img { max-width: 90%; max-height: 90%; object-fit: contain; }
.close-viewer { position: absolute; top: 20px; right: 30px; font-size: 2em; color: #fff; cursor: pointer; }

/* --- 响应式适配 (大屏) --- */
@media (min-width: 768px) {
    .mobile-nav { justify-content: center; }
    .view { max-width: 600px; margin: 0 auto; }
    /* ... 其他大屏优化 ... */
}
